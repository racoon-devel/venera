{{ define "results" }}
{{ template "header" 1 }}
<form action="/results" method="GET">
    <table>
        <td>Task: 
            <select name="task">
                <option value="">All</option>
                {{range $i, $task := $.Tasks}}
                <option value="{{ $task.ID }}" {{ if eq $.TaskFilter $task.ID }} selected {{ end }} >Task #{{ $task.ID }} [ {{ $task.Provider }} ]</option>
                {{- end}}
            </select>
        </td>
        <td>Ordering:
            <select name="order">
                <option value="desc" {{ if eq $.Ascending false }} selected {{ end }}>Descending</option>
                <option value="asc" {{ if eq $.Ascending true }} selected {{ end }}>Ascending</option>
            </select>
        </td>
        <td>
            <button type="submit">Filter</button>
        </td>
    </table>
</form>
<table>
<col width ="30%">
    
{{range $i, $res := $.Results }}
<tr>
    <td><img width="80%" heigth="5%" src="{{ index $res.Person.Photo 0 }}"></td>
    <td valign="top">
        <table>
        <tr><td><a href="#"><h4>{{ $res.Person.Name }}</h4></a></td></tr>
        <tr><td><u>Rating:</u> {{ $res.Rating }}</td></tr>
        <tr><td><u>Description:</u> {{ $res.Person.Bio }}</td></tr>
        <tr><td>
                {{range $i, $foto := $res.Person.Photo }}
                <a href="{{ $foto }}">Foto #{{ $i }} </a>
                {{ end }}
        </td></tr>
        </table>
    </td>
</tr>
{{- end}}
</table>
{{ template "footer" }}
{{ end }}